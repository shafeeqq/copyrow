(function(a){var b={maximum:"5",copyfrom:"row",custommessage:"Maximum Number Exceed",dynamicname:true,removeclass:"delete",parentclass:"parent"};function c(e,d){this.config=a.extend({},b,d);this.rowclassname="."+this.config.copyfrom;this.element=e.closest(this.rowclassname);this.parentrow=this.config.parentclass;this.button=e;this.totalindex=a(this.rowclassname).length+1;this.getindex=a(this.button).closest("."+this.parentrow).find(">*:not(."+this.parentrow+")"+this.rowclassname).length;this.specialclass="__remove";this.init()}c.prototype.getAttributes=function(e){var d={};if(e.length){a.each(e[0].attributes,function(g,f){d[f.name]=f.value})}return d};c.prototype.dynamicAttribute=function(e,d){var f=a(d).attr(e);if(f!=undefined&&f!=""){newname=a(d).attr(e)+this.totalindex;newname=newname.split("_");namelength=newname.length;if(namelength>1){newname[namelength]=String(this.getindex);newname=newname.join("_")}else{newname=a(d).attr(e)+this.totalindex+"_"+this.getindex}}return(newname)?newname:d};c.prototype.init=function(){var e=a(this.button).attr("class");$self=this;if(this.config.maximum>this.getindex){if(this.element.length>0){var f=this.element.clone(true,true);f.find("."+this.specialclass).remove();a("<input/>",{value:"-",type:"button","class":this.config.removeclass}).insertAfter(f.find("."+e));if(this.config.dynamicname==true){a(f).find("input[type='text'],select,checkbox").each(function(){newname=$self.dynamicAttribute("name",this);a(this).attr("name",newname);newid=$self.dynamicAttribute("id",this);a(this).attr("id",newid)})}a(f).children().each(function(){a(this).addClass($self.specialclass)});var d=this.getAttributes(f);d.html=f.html();var g=a("<"+a(f).get(0).tagName+"/>",d).on("click","."+this.config.removeclass,function(){a(this).closest($self.rowclassname).remove()});a(g).appendTo(a(this.button).closest("."+this.parentrow))}else{return}}else{alert(this.config.custommessage)}};a.fn.copyrow=function(d){new c(this,d)}}(jQuery));